Image_table = {}

--Environment background--
Image_table['emptybackground'] = love.graphics.newImage("Life_images/Background/Anj_empty6.png")
Image_table['lushbackground'] = love.graphics.newImage("Life_images/Background/Anj_lush3.png")
Image_table['farmbackground'] = love.graphics.newImage("Life_images/Background/Anj_farmland2.png")

--Environment objects---
Image_table['treeimage'] = love.graphics.newImage("Life_images/Env_objects/Anjtree2.png")
Image_table['rockimage'] = love.graphics.newImage("Life_images/Env_objects/Daverock4.png")
Image_table['wolfdenimage'] = love.graphics.newImage("Life_images/Env_objects/Wolf_den.png")
Image_table['pond1'] = love.graphics.newImage("Life_images/Env_objects/pond.png")

--Interior items--
--farming
Image_table['dirtpile'] = love.graphics.newImage('Life_images/interior_obj/farm/dirtpile.png')
Image_table['dirtpile_seed'] = love.graphics.newImage("Life_images/interior_obj/farm/dirtpile_seed.png")
Image_table['dirtpile_seedling'] = love.graphics.newImage("Life_images/interior_obj/farm/dirtpile_seedling.png")
Image_table['dirtpile_fruit'] = love.graphics.newImage("Life_images/interior_obj/farm/dirtpile_fruit.png")

--beds
Image_table['bed1'] = love.graphics.newImage("Life_images/interior_obj/bed.png")
Image_table['bed2'] = love.graphics.newImage("Life_images/interior_obj/bed2.png")

Image_table['bench1'] = love.graphics.newImage('Life_images/interior_obj/bench.png')
Image_table['boughtsign'] = love.graphics.newImage('Life_images/interior_obj/purchase_sign.png')



--Items--
Image_table['hand'] = love.graphics.newImage("Life_images/gameitems/hand2.png")
Image_table['hatchetitem'] = love.graphics.newImage("Life_images/gameitems/hatchet2.png")
Image_table['hoeitem'] = love.graphics.newImage("Life_images/gameitems/hoe.png")
Image_table['fruititem'] = love.graphics.newImage("Life_images/gameitems/fruit.png")
Image_table['pickaxeitem'] = love.graphics.newImage("Life_images/gameitems/pickaxe.png")
Image_table['empty'] = love.graphics.newImage("Life_images/gameitems/empty.png")
Image_table['logsitem'] = love.graphics.newImage("Life_images/gameitems/logs.png")
Image_table['leavesitem'] = love.graphics.newImage("Life_images/gameitems/leaves.png")
Image_table['rocksitem'] = love.graphics.newImage("Life_images/gameitems/rocks.png")
Image_table['wolfheaditem'] = love.graphics.newImage("Life_images/gameitems/wolfhead.png")
Image_table['knifeitem'] = love.graphics.newImage("Life_images/gameitems/knife.png")
Image_table['hammeritem'] = love.graphics.newImage("Life_images/gameitems/hammer.png")


---Construction items----
Image_table['tent_construction_item'] = love.graphics.newImage("Life_images/gameitems/construction/tent_construction_item.png")

--Construction buildings--
Image_table['tent_construction'] = love.graphics.newImage("Life_images/Buildings/construction/tent_construction.png")


--UI--
Image_table['UItile'] = love.graphics.newImage("Life_images/UI/item_tile.png")


---Humans---
--Hands--
Image_table['whitehand'] = love.graphics.newImage("Life_images/NPC/Human/Hand/whitehand.png")
Image_table['latinxhand'] = love.graphics.newImage("Life_images/NPC/Human/Hand/latinxhand.png")
Image_table['brownhand'] = love.graphics.newImage("Life_images/NPC/Human/Hand/brownhand.png")
Image_table['blackhand'] = love.graphics.newImage("Life_images/NPC/Human/Hand/blackhand.png")


--Feet--
Image_table['blacknakedfeet'] = love.graphics.newImage("Life_images/NPC/Human/Feet/blackfoot.png")
Image_table['brownnakedfeet'] = love.graphics.newImage("Life_images/NPC/Human/Feet/brownfoot.png")
Image_table['whitenakedfeet'] = love.graphics.newImage("Life_images/NPC/Human/Feet/whitefoot.png")
Image_table['latinxnakedfeet'] = love.graphics.newImage("Life_images/NPC/Human/Feet/latinxfoot.png")

--Eyes--
Image_table['roundeyes'] = love.graphics.newImage("Life_images/NPC/Human/Eyes/round.png")
Image_table['crazyeyes'] = love.graphics.newImage("Life_images/NPC/Human/Eyes/crazy.png")
Image_table['eyepatcheyes'] = love.graphics.newImage("Life_images/NPC/Human/Eyes/eyepatch.png")
Image_table['bigeyes'] = love.graphics.newImage("Life_images/NPC/Human/Eyes/big.png")
Image_table['sharpeyes'] = love.graphics.newImage("Life_images/NPC/Human/Eyes/sharp.png")

--Mouth--
Image_table['nomouth'] = love.graphics.newImage("Life_images/NPC/Human/Mouth/nomouth.png")
Image_table['smirk'] = love.graphics.newImage("Life_images/NPC/Human/Mouth/smirk.png")
Image_table['straight'] = love.graphics.newImage("Life_images/NPC/Human/Mouth/straight.png")
Image_table['widegrin'] = love.graphics.newImage("Life_images/NPC/Human/Mouth/widegrin.png")
Image_table['wow'] = love.graphics.newImage("Life_images/NPC/Human/Mouth/wow.png")

--Heads--
Image_table['whiteroundhead'] = love.graphics.newImage("Life_images/NPC/Human/Head/whiteroundhead.png")
Image_table['brownroundhead'] = love.graphics.newImage("Life_images/NPC/Human/Head/brownroundhead.png")
Image_table['blackroundhead'] = love.graphics.newImage("Life_images/NPC/Human/Head/blackroundhead.png")
Image_table['latinxroundhead'] = love.graphics.newImage("Life_images/NPC/Human/Head/latinxroundhead.png")


--Bodies
Image_table['whitemediumbodynaked'] = love.graphics.newImage("Life_images/NPC/Human/Body/whitemediumbodynaked.png")
Image_table['brownmediumbodynaked'] = love.graphics.newImage("Life_images/NPC/Human/Body/brownmediumbodynaked.png")
Image_table['blackmediumbodynaked'] = love.graphics.newImage("Life_images/NPC/Human/Body/blackmediumbodynaked.png")
Image_table['latinxmediumbodynaked'] = love.graphics.newImage("Life_images/NPC/Human/Body/latinxmediumbodynaked.png")



--Hair--
Image_table['purplefemininespikey'] = love.graphics.newImage("Life_images/NPC/Human/Hair/purplefemininespikey.png")
Image_table['cyanfemininespikey'] = love.graphics.newImage("Life_images/NPC/Human/Hair/cyanfemininespikey.png")
Image_table['redfemininespikey'] = love.graphics.newImage("Life_images/NPC/Human/Hair/redfemininespikey.png")
Image_table['blondefemininespikey'] = love.graphics.newImage("Life_images/NPC/Human/Hair/blondefemininespikey.png")
Image_table['greenfemininespikey'] = love.graphics.newImage("Life_images/NPC/Human/Hair/greenfemininespikey.png")
Image_table['blondefringelong'] = love.graphics.newImage("Life_images/NPC/Human/Hair/blondefringelong.png")
Image_table['cyanfringelong'] = love.graphics.newImage("Life_images/NPC/Human/Hair/cyanfringelong.png")
Image_table['purplefringelong'] = love.graphics.newImage("Life_images/NPC/Human/Hair/purplefringelong.png")
Image_table['redfringelong'] = love.graphics.newImage("Life_images/NPC/Human/Hair/redfringelong.png")
Image_table['blondefringeshort'] = love.graphics.newImage("Life_images/NPC/Human/Hair/blondefringeshort.png")
Image_table['redfringeshort'] = love.graphics.newImage("Life_images/NPC/Human/Hair/redfringeshort.png")
Image_table['cyanfringeshort'] = love.graphics.newImage("Life_images/NPC/Human/Hair/cyanfringeshort.png")
Image_table['purplefringeshort'] = love.graphics.newImage("Life_images/NPC/Human/Hair/purplefringeshort.png")
Image_table['blondeshort'] = love.graphics.newImage("Life_images/NPC/Human/Hair/blondeshort.png")
Image_table['redshort'] = love.graphics.newImage("Life_images/NPC/Human/Hair/redshort.png")
Image_table['cyanshort'] = love.graphics.newImage("Life_images/NPC/Human/Hair/cyanshort.png")






--Bodies--
Image_table['nakedfeet'] = love.graphics.newImage("Life_images/characters/Feet/foot2.png")
Image_table['naked1'] = love.graphics.newImage("Life_images/characters/Bodies/Naked1.png")
Image_table['grassarmour1'] = love.graphics.newImage("Life_images/gameitems/armour/grassarmour1.png")
Image_table['grassarmour2'] = love.graphics.newImage("Life_images/gameitems/armour/grassarmour2.png")
Image_table['grassarmour3'] = love.graphics.newImage("Life_images/gameitems/armour/grassarmour3.png")


--Heads--
Image_table['whiteyellowspikey'] = love.graphics.newImage("Life_images/characters/Heads/test1.png")
Image_table['whitebluespikey'] = love.graphics.newImage("Life_images/characters/Heads/test1.png")
Image_table['whiteredspikey'] = love.graphics.newImage("Life_images/characters/Heads/test1.png")
Image_table['whitegreenspikey'] = love.graphics.newImage("Life_images/characters/Heads/whitegreenspikey.png")
Image_table['whitepurplespikey'] = love.graphics.newImage("Life_images/characters/Heads/whitepurplespikey.png")
Image_table['whitebrownspikey'] = love.graphics.newImage("Life_images/characters/Heads/whitebrownspikey.png")
Image_table['whiteyellowlong'] = love.graphics.newImage("Life_images/characters/Heads/whiteyellowlong.png")
Image_table['whitebluelong'] = love.graphics.newImage("Life_images/characters/Heads/whitebluelong.png")
Image_table['whiteredlong'] = love.graphics.newImage("Life_images/characters/Heads/whiteredlong.png")
Image_table['whitegreenlong'] = love.graphics.newImage("Life_images/characters/Heads/whitegreenlong.png")
Image_table['whitepurplelong'] = love.graphics.newImage("Life_images/characters/Heads/whitepurplelong.png")
Image_table['whitebrownlong'] = love.graphics.newImage("Life_images/characters/Heads/whitebrownlong.png")

Image_table['player1'] = love.graphics.newImage("Life_images/characters/test/test.png")
Image_table['NPC1'] = love.graphics.newImage("Life_images/Andy.png")
Image_table['NPC2'] = love.graphics.newImage("Life_images/Liam.png")
Image_table['NPC3'] = love.graphics.newImage("Life_images/Alec.png")
Image_table['NPC4'] = love.graphics.newImage("Life_images/Brown.png")
Image_table['NPC5'] = love.graphics.newImage("Life_images/Hosko.png")
Image_table['NPC6'] = love.graphics.newImage("Life_images/characters/cupcakeanj.png")
Image_table['NPC7'] = love.graphics.newImage("Life_images/characters/Goblin1.png")

--Animals--
Image_table['wolfbody'] = love.graphics.newImage("Life_images/Animals/Animalbodies/wolfbody.png")
Image_table['wolfhead'] = love.graphics.newImage("Life_images/Animals/Animalhead/wolfhead.png")
Image_table['wolffeet'] = love.graphics.newImage("Life_images/Animals/Animalfeet/wolfeet.png")


--Building Homes--
--Tents
Image_table['bluetentoutside'] = love.graphics.newImage("Life_images/Buildings/housing/bluetentoutside.png")
Image_table['bluetentinside'] = love.graphics.newImage("Life_images/Buildings/housing/bluetentinside.png")
Image_table['browntentoutside'] = love.graphics.newImage("Life_images/Buildings/housing/browntentoutside.png")
Image_table['browntentinside'] = love.graphics.newImage("Life_images/Buildings/housing/browntentinside.png")
Image_table['cyantentoutside'] = love.graphics.newImage("Life_images/Buildings/housing/cyantentoutside.png")
Image_table['cyantentinside'] = love.graphics.newImage("Life_images/Buildings/housing/cyantentinside.png")
Image_table['goldtentoutside'] = love.graphics.newImage("Life_images/Buildings/housing/goldtentoutside.png")
Image_table['goldtentinside'] = love.graphics.newImage("Life_images/Buildings/housing/goldtentinside.png")
Image_table['greententoutside'] = love.graphics.newImage("Life_images/Buildings/housing/greententoutside.png")
Image_table['greententinside'] = love.graphics.newImage("Life_images/Buildings/housing/greententinside.png")
Image_table['purpletentoutside'] = love.graphics.newImage("Life_images/Buildings/housing/purpletentoutside.png")
Image_table['purpletentinside'] = love.graphics.newImage("Life_images/Buildings/housing/purpletentinside.png")
Image_table['redtentoutside'] = love.graphics.newImage("Life_images/Buildings/housing/redtentoutside.png")
Image_table['redtentinside'] = love.graphics.newImage("Life_images/Buildings/housing/redtentinside.png")
Image_table['tantentoutside'] = love.graphics.newImage("Life_images/Buildings/housing/tantentoutside.png")
Image_table['tantentinside'] = love.graphics.newImage("Life_images/Buildings/housing/tantentinside.png")

--Huts
Image_table['yellowhutoutside'] = love.graphics.newImage("Life_images/Buildings/housing/yellowhutoutside_big.png")
Image_table['yellowhutinside'] = love.graphics.newImage("Life_images/Buildings/housing/yellowhutinside_big.png")


--House
Image_table['house1outside'] = love.graphics.newImage("Life_images/Buildings/housing/house1outside.png")
Image_table['house1inside'] = love.graphics.newImage("Life_images/Buildings/housing/house1inside.png")



Image_table['house2outside'] = love.graphics.newImage("Life_images/Buildings/farmhouse.png")
Image_table['house2inside'] = love.graphics.newImage("Life_images/Buildings/woodcutterhutinside2.png")

--Building workplaces--
Image_table['farm1'] = love.graphics.newImage("Life_images/Buildings/farmfield1.png")
Image_table['trader1outside'] = love.graphics.newImage("Life_images/Buildings/general_store_outside.png")
Image_table['trader1inside'] = love.graphics.newImage("Life_images/Buildings/general_store_inside.png")
Image_table['townhall1outside'] = love.graphics.newImage("Life_images/Buildings/townhall.png")
Image_table['townhall1inside'] = love.graphics.newImage("Life_images/Buildings/townhall_inside.png")
Image_table['Crafter1outside'] = love.graphics.newImage("Life_images/Buildings/Crafter_tent_outside.png")
Image_table['Crafter1inside'] = love.graphics.newImage("Life_images/Buildings/Crafter_tent_inside.png")
Image_table['Sawmill1outside'] = love.graphics.newImage("Life_images/Buildings/sawmill.png")
Image_table['Sawmill1inside'] = love.graphics.newImage("Life_images/Buildings/sawmillinside.png")
Image_table['Minehut1outside'] = love.graphics.newImage("Life_images/Buildings/minehut.png")
Image_table['Minehut1inside'] = love.graphics.newImage("Life_images/Buildings/minehutinside.png")
Image_table['Guardhouseoutside'] = love.graphics.newImage("Life_images/Buildings/Guardhouse1_outside.png")
Image_table['Guardhouseinside'] = love.graphics.newImage("Life_images/Buildings/Guardhouse1_inside.png")
Image_table['builder_outside'] = love.graphics.newImage("Life_images/Buildings/builder_outside.png")
Image_table['builder_inside'] = love.graphics.newImage("Life_images/Buildings/builder_inside.png")

--Building rec--
Image_table['Park1'] = love.graphics.newImage("Life_images/Buildings/Park.png")
Image_table['Balloon1'] = love.graphics.newImage("Life_images/Buildings/hot_air_balloon.png")

--Image_table[''] = love.graphics.newImage("")




---Head combinations---

headtier1 = {'white'}
headtier2 = {'red','yellow','green','purple','blue','brown'}
headtier3 = {'spikey','long'}


function draw_mainworld_test()
  if daytime > 16 then
    love.graphics.setColor(0.8,0.8,1)
    dayred = 0.8
    daygreen = 0.8
    dayblue = 1
  else
    love.graphics.setColor(1,1,1)
    dayred = 1
    daygreen = 1
    dayblue = 1
  end
  if player1.playerenvirolist == nil then
    return
  end
  for i,v in ipairs(player1.playerenvirolist) do
    if v.x >= player1.x - (viewdistance+10000) and v.x <= player1.x + viewdistance and v.y >=player1.y - (viewdistance+10000) and
    v.y <= player1.y + viewdistance then
      if detail == 'high' then
        love.graphics.draw(Image_table[v.image],v.x,v.y) --draw background environment
      elseif detail == 'low' then
        love.graphics.setColor(0,0.3,0)
        love.graphics.rectangle("fill", v.x, v.y,10000,10000)
        love.graphics.setColor(dayred, daygreen, dayblue)
      end
      for o,b in ipairs(v.field) do
        love.graphics.draw(Image_table[b.image], b.x, b.y) --draw trees, rocks etc
      end
    end
  end
  for o, b in pairs(towns) do
    for i,v in ipairs(b) do
      if v.x >= player1.x - (viewdistance+10000) and v.x <= player1.x + viewdistance and v.y >=player1.y - (viewdistance+10000) and
      v.y <= player1.y + viewdistance then
        if detail == 'high' then
          love.graphics.draw(Image_table[v.image],v.x,v.y) --draw background town
        elseif detail == 'low' then
          love.graphics.setColor(0.4,0.2,0)
          --love.graphics.rectangle("fill", v.x, v.y,10000,10000)
          love.graphics.setColor(dayred, daygreen, dayblue)
        end
      end
    end
  end
  for i,v in ipairs(Buildinglist) do
    if v.x >= player1.x - (viewdistance+10000) and v.x <= player1.x + viewdistance and v.y >=player1.y - (viewdistance+10000) and
    v.y <= player1.y + viewdistance then
      love.graphics.draw(Image_table[v.inside], v.x, v.y) -- draw interior buildings
      for o,b in ipairs(v.interiors) do
        love.graphics.draw(Image_table[b.image], b.x, b.y) -- draw interior objects
      end
    end
  end
  
  if player1.held.specialtype == 'building' then
    local playerbuilding= findplayerbuilding(player1, player1.held)
    if playerbuilding.possible == true then
      love.graphics.setColor(0,1,0)
    else
      love.graphics.setColor(1,0,0)
    end
    love.graphics.draw(Image_table[playerbuilding.image],playerbuilding.x,playerbuilding.y)
    love.graphics.setColor(1,1,1)
  end
      
  love.graphics.setColor(1,1,1)
  for num,gitem in ipairs(grounditemslist) do
    love.graphics.draw(Image_table[gitem.image], gitem.x , gitem.y)
  end
  for i, v in ipairs(PeopleandBuildings) do
    if v.x >= player1.x - (viewdistance+1000) and v.x <= player1.x + viewdistance and v.y >=player1.y - (viewdistance+1000) and
    v.y <= player1.y + viewdistance then
      if v.identity == 'person' then
        love.graphics.setColor(dayred, daygreen, dayblue)
        love.graphics.draw(Image_table[v.feet], v.x+v.feet1x*-v.dirface, v.y+v.feet1y, 0, v.dirface, 1, v.diroffset, 0)
        love.graphics.draw(Image_table[v.feet], v.x+v.feet2x*-v.dirface, v.y+v.feet2y, 0, v.dirface, 1, v.diroffset, 0)
        draw_held_item(v)
        love.graphics.draw(Image_table[v.body], v.x, v.y, 0, v.dirface, 1, v.diroffset, 0)
        if v.armourimage ~= nil then
          love.graphics.draw(Image_table[v.armourimage], v.x, v.y, 0, v.dirface, 1, v.diroffset, 0)
        end
        love.graphics.draw(Image_table[v.head], v.x, v.y, 0, v.dirface, 1, v.diroffset, 0)
        love.graphics.draw(Image_table[v.mouth], v.x, v.y, 0, v.dirface, 1, v.diroffset, 0)
        love.graphics.draw(Image_table[v.eyes], v.x, v.y, 0, v.dirface, 1, v.diroffset, 0)
        love.graphics.draw(Image_table[v.hair], v.x, v.y, 0, v.dirface, 1, v.diroffset, 0)
        if v.job ~= nil then
          love.graphics.print(v.name..' the '..v.job, v.x + 10, v.y-20, 0, 2, 2)
        end
      elseif v.interior == false and v.btype ~= 'park' then
        love.graphics.setColor(dayred, daygreen, dayblue)
        love.graphics.draw(Image_table[v.outside], v.x, v.y)
      elseif v.identity == 'env' then
        love.graphics.setColor(dayred, daygreen, dayblue)
        love.graphics.draw(Image_table[v.image], v.x, v.y)
      end
    end
  end
  if talking == true and dialog.headloc == 'left' then
    local colour = {0, 0, 0, 100}
    local talklength = 50
    if #dialog.NPCtalk[1] > talklength then
      local check = #dialog.NPCtalk[1]/talklength
      love.graphics.rectangle('fill', dialog.NPC.x-12, dialog.NPC.y-20, 12.5*talklength, 32*check)
      local count = 1
      while count < check+1 do
        love.graphics.print({colour,dialog.NPCtalk[1]:sub( 1+((count-1)*talklength), count*talklength )..'-'}, dialog.NPC.x-10, dialog.NPC.y -40+(20*count),0,2,2)
        count = count + 1
      end
    else
      love.graphics.rectangle('fill', dialog.NPC.x-12, dialog.NPC.y-20, 12.5*#dialog.NPCtalk[1], 32)
      love.graphics.print({colour,dialog.NPCtalk[1]}, dialog.NPC.x-10, dialog.NPC.y -20,0,2,2)
    end
  end
end
      


function drawcraftmenu(player)
  love.graphics.setColor(0.8,0.7,0.7)
  love.graphics.rectangle("fill", gamewindow.width / 10, gamewindow.height/10, 200, 230)
  love.graphics.rectangle("fill", (gamewindow.width / 10)*4, gamewindow.height/10, (gamewindow.width / 10) *5, (gamewindow.height/10)*6)
  love.graphics.setColor(0,0,0)
  love.graphics.print("Item info", (gamewindow.width / 10), gamewindow.height/10 - 40,0,3,3)
  love.graphics.print("Crafting Options", (gamewindow.width / 10*4), gamewindow.height/10 - 40,0,3,3)
  love.graphics.print(player.items[player.invnum].item,(gamewindow.width / 10)+10, (gamewindow.height/10),0,2,2)
  love.graphics.print('Damage: '..player.items[player.invnum].damage,(gamewindow.width / 10)+10, (gamewindow.height/10)+100,0,2,2)
  love.graphics.print('Value: '..player.items[player.invnum].value,(gamewindow.width / 10)+10, (gamewindow.height/10)+130,0,2,2)
  if player.items[player.invnum].specialtype ~= nil then
    love.graphics.print('Type: '..player.items[player.invnum].specialtype,(gamewindow.width / 10)+10, (gamewindow.height/10)+160,0,2,2)
  end
  if player.items[player.invnum].specialvalue ~= nil then
    love.graphics.print('Special: '..player.items[player.invnum].specialvalue,(gamewindow.width / 10)+10, (gamewindow.height/10)+190,0,2,2)
  end
  love.graphics.setColor(1,1,1)
  if player.items[player.invnum].specialtype == 'armour' then
    love.graphics.draw(Image_table[player.items[player.invnum].image], (gamewindow.width / 10)+10, (gamewindow.height/10)+30-75)      --draw held item
  else
    love.graphics.draw(Image_table[player.items[player.invnum].image], (gamewindow.width / 10)+10, (gamewindow.height/10)+30)      --draw held item
  end
end

function drawopeninventory(player)
  local start = 1
  
  love.graphics.rectangle("line", gamewindow.width/10 - 60, 30,gamewindow.width/10*8 + 120,gamewindow.height/10*8)
  for i, v in ipairs(player1.extra_inventory) do
    if i == player.extrainvnum then
      love.graphics.rectangle("line", gamewindow.width/10  * i - 50, start*60,60,60)
    end
    love.graphics.draw(Image_table['UItile'], gamewindow.width/10  * i - 50, start*60)
    if v.specialtype == 'armour' then
      love.graphics.draw(Image_table[player.extra_inventory[i].image], gamewindow.width / 10 * i - 50 - 20, start*60 - 75)
    else
      love.graphics.draw(Image_table[player.extra_inventory[i].image], gamewindow.width/10  * i - 50, start*60)
    end
    
    love.graphics.print(tostring(v.num),gamewindow.width/10  * i - 50, start*60)
    
  end
end


function draw_ground_items()
  for num,gitem in ipairs(grounditemslist) do
    love.graphics.draw(Image_table[gitem.image], gitem.x , gitem.y)
  end
end

function draw_held_item(player)
  local xadd
  itemimage = player.items[player.invnum]
  if itemimage == nil then
    itemimage = create_item(0, 0, 'empty', 0, 1, "empty",0, false)
    return
  end
    
  if player.dirface == -1 then
    xadd = player.w - 15
    love.graphics.draw(Image_table[player.hand], player.x + xadd + math.floor(player.itemx) + (player.items[player.invnum].tilt*player.dirface*40), player.y+(player.h*0.8)-player.items[player.invnum].tilt*30 - 60, player.items[player.invnum].tilt * player.dirface+0.2 , -player.dirface*player.weaptilt, 1, 20, 0)
    love.graphics.draw(Image_table[itemimage.image], player.x + xadd + math.floor(player.itemx) + (player.items[player.invnum].tilt*player.dirface*40), player.y+(player.h*0.8)-player.items[player.invnum].tilt*30 - Image_table[itemimage.image]:getHeight(), player.items[player.invnum].tilt * player.dirface+0.2 , -player.dirface*player.weaptilt, 1, 20, 0)
  else 
    xadd= 15
    love.graphics.draw(Image_table[player.hand], player.x + xadd + math.floor(player.itemx) + (player.items[player.invnum].tilt*player.dirface*40), player.y+(player.h*0.8)-player.items[player.invnum].tilt*30 - 60, player.items[player.invnum].tilt * player.dirface-0.2 , -player.dirface*player.weaptilt, 1, 20, 0)
    love.graphics.draw(Image_table[itemimage.image], player.x + xadd + math.floor(player.itemx) + (player.items[player.invnum].tilt*player.dirface*40), player.y+(player.h*0.8)-player.items[player.invnum].tilt*30 - Image_table[itemimage.image]:getHeight(), player.items[player.invnum].tilt * player.dirface-0.2 , -player.dirface*player.weaptilt, 1, 20, 0)
  end
  
  
end

function draw_NPC()
  table.insert(ListofNPCs, player1)
  table.sort(ListofNPCs,function(a,b)
    return a.y<b.y
  end)
  for i, v in ipairs(ListofNPCs) do
    if v.x >= player1.x - (viewdistance+1000) and v.x <= player1.x + viewdistance and v.y >=player1.y - (viewdistance+1000) and
    v.y <= player1.y + viewdistance then
      if v.visible == true and v.loc ~= "outside" then
        love.graphics.draw(Image_table[v.feet], v.x+v.feet1x*-v.dirface, v.y+v.feet1y, 0, v.dirface, 1, v.diroffset, 0)
        love.graphics.draw(Image_table[v.feet], v.x+v.feet2x*-v.dirface, v.y+v.feet2y, 0, v.dirface, 1, v.diroffset, 0)
        love.graphics.draw(Image_table[v.body], v.x, v.y, 0, v.dirface, 1, v.diroffset, 0)
        love.graphics.draw(Image_table[v.head], v.x, v.y, 0, v.dirface, 1, v.diroffset, 0)
        love.graphics.draw(Image_table[v.mouth], v.x, v.y, 0, v.dirface, 1, v.diroffset, 0)
        love.graphics.draw(Image_table[v.eyes], v.x, v.y, 0, v.dirface, 1, v.diroffset, 0)
        love.graphics.draw(Image_table[v.hair], v.x, v.y, 0, v.dirface, 1, v.diroffset, 0)
        
        draw_held_item(v)
        love.graphics.print(v.name, v.x + 10, v.y-20, 0, 2, 2)
      end
    end
  end
  table.remove(ListofNPCs, tablefind(ListofNPCs,player1))
end

function draw_outside_NPC()
  table.insert(ListofNPCs, player1)
  table.sort(ListofNPCs,function(a,b)
    return a.y<b.y
  end)
  for i, v in ipairs(ListofNPCs) do
    if v.x >= player1.x - (viewdistance+1000) and v.x <= player1.x + viewdistance and v.y >=player1.y - (viewdistance+1000) and
    v.y <= player1.y + viewdistance then
      if v.loc == "outside" then
        love.graphics.draw(Image_table[v.feet], v.x+v.feet1x*-v.dirface, v.y+v.feet1y, 0, v.dirface, 1, v.diroffset, 0)
        love.graphics.draw(Image_table[v.feet], v.x+v.feet2x*-v.dirface, v.y+v.feet2y, 0, v.dirface, 1, v.diroffset, 0)
        love.graphics.draw(Image_table[v.body], v.x, v.y, 0, v.dirface, 1, v.diroffset, 0)
        love.graphics.draw(Image_table[v.head], v.x, v.y, 0, v.dirface, 1, v.diroffset, 0)
        draw_held_item(v)
        love.graphics.print(v.name, v.x + 10, v.y-20, 0, 2, 2)
      end
    end
  end
  table.remove(ListofNPCs, tablefind(ListofNPCs,player1))
end




function draw_userinterface(player_UI)
  count = 1
  if player1.armourimage ~= nil then
    love.graphics.draw(Image_table[player1.armourimage], gamewindow.width / 10 * 9.5-70, gamewindow.height - gamewindow.height/10 * 9.5-70)
  end
  love.graphics.print(tostring(player1.armour), gamewindow.width / 10 * 9.5 - 50, gamewindow.height - gamewindow.height/10 * 9.5)
  while count ~= 10 do
    love.graphics.draw(Image_table['UItile'], gamewindow.width / 10 * count - 50, gamewindow.height - gamewindow.height/10)
    count = count + 1
  end
  for i,v in ipairs(player_UI.items) do
    if i == player_UI.invnum then
       love.graphics.rectangle("line", gamewindow.width / 10 * i - 50, gamewindow.height - gamewindow.height/10, 60, 60)
    end
    if v.specialtype == 'armour' then
      love.graphics.draw(Image_table[v.image], gamewindow.width / 10 * i - 50 -20, gamewindow.height - gamewindow.height/10 - 75)
    else
      love.graphics.draw(Image_table[v.image], gamewindow.width / 10 * i - 50, gamewindow.height - gamewindow.height/10)
    end
    love.graphics.print(tostring(v.num), gamewindow.width / 10 * i - 50, gamewindow.height - gamewindow.height/10)
  end
end

function draw_animals()
  for i, v in ipairs(Listofanimals) do
    if v.x >= player1.x - (viewdistance+1000) and v.x <= player1.x + viewdistance and v.y >=player1.y - (viewdistance+1000) and
    v.y <= player1.y + viewdistance then
      love.graphics.draw(Image_table[v.feet], v.x+v.feet1x*-v.dirface, v.y+v.feet1y, 0, v.dirface, 1, v.diroffset, 0)
      love.graphics.draw(Image_table[v.feet], v.x+v.feet2x*-v.dirface, v.y+v.feet2y, 0, v.dirface, 1, v.diroffset, 0)
      love.graphics.draw(Image_table[v.body], v.x, v.y, 0, v.dirface, 1, v.diroffset, 0)
      love.graphics.draw(Image_table[v.head], v.x, v.y, 0, v.dirface, 1, v.diroffset, 0)
    end
  end
end